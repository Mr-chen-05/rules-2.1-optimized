# ğŸ“‹ è®°å½•å‘˜ç³»ç»Ÿæ¨¡æ¿é…ç½®æ–‡ä»¶
# Template Configuration for Context Recorder System v2.0
# å®šä¹‰é¡¹ç›®ç±»å‹ã€è§¦å‘æ¡ä»¶ã€åˆ†ç±»è§„åˆ™ç­‰æ™ºèƒ½åŒ–é…ç½®

version: "2.0-enhanced"
last_updated: "2025-10-18"
compatibility: "context-recorder-system v2.0+"

# Template System v2.0 Configuration
# æ™ºèƒ½æ¨¡æ¿ç³»ç»Ÿé…ç½®æ–‡ä»¶

# ğŸ¯ é¡¹ç›®ç±»å‹è‡ªåŠ¨è¯†åˆ«é…ç½®
project_types:
  frontend:
    name: "å‰ç«¯é¡¹ç›®"
    detection_rules:
      files:
        - "package.json"
        - "yarn.lock"
        - "pnpm-lock.yaml"
        - "webpack.config.js"
        - "vite.config.js"
        - "next.config.js"
      directories:
        - "src/components"
        - "src/pages"
        - "public"
        - "assets"
      dependencies:
        - "react"
        - "vue"
        - "angular"
        - "@angular/core"
        - "svelte"
    tech_stacks:
      - "React"
      - "Vue.js"
      - "Angular"
      - "Svelte"
      - "Next.js"
      - "Nuxt.js"
      - "TypeScript"
      - "JavaScript"
    default_config:
      complexity_score: 6
      estimated_duration: "2-6ä¸ªæœˆ"
      team_size: "2-5äºº"
      archive_threshold:
        lines: 150
        days: 5
        decisions: 3

  backend:
    name: "åç«¯é¡¹ç›®"
    detection_rules:
      files:
        - "pom.xml"
        - "build.gradle"
        - "requirements.txt"
        - "Pipfile"
        - "go.mod"
        - "Cargo.toml"
        - "composer.json"
      directories:
        - "src/main/java"
        - "src/main/kotlin"
        - "app"
        - "api"
        - "controllers"
        - "models"
        - "services"
      dependencies:
        - "spring-boot"
        - "django"
        - "flask"
        - "express"
        - "fastapi"
        - "gin"
    tech_stacks:
      - "Spring Boot"
      - "Django"
      - "Flask"
      - "Express.js"
      - "FastAPI"
      - "Go Gin"
      - "ASP.NET Core"
      - "Ruby on Rails"
    default_config:
      complexity_score: 8
      estimated_duration: "3-12ä¸ªæœˆ"
      team_size: "3-8äºº"
      archive_threshold:
        lines: 200
        days: 7
        decisions: 5

  fullstack:
    name: "å…¨æ ˆé¡¹ç›®"
    detection_rules:
      files:
        - "package.json"
        - "requirements.txt"
        - "docker-compose.yml"
        - "Dockerfile"
      directories:
        - "frontend"
        - "backend"
        - "client"
        - "server"
        - "api"
        - "web"
      mixed_indicators:
        - has_frontend_and_backend: true
        - has_database_config: true
        - has_api_routes: true
    tech_stacks:
      - "MERN Stack"
      - "MEAN Stack"
      - "Django + React"
      - "Spring Boot + Vue"
      - "Next.js + API"
      - "T3 Stack"
    default_config:
      complexity_score: 9
      estimated_duration: "6-18ä¸ªæœˆ"
      team_size: "4-12äºº"
      archive_threshold:
        lines: 250
        days: 10
        decisions: 7

  mobile:
    name: "ç§»åŠ¨åº”ç”¨é¡¹ç›®"
    detection_rules:
      files:
        - "pubspec.yaml"
        - "android/app/build.gradle"
        - "ios/Podfile"
        - "react-native.config.js"
        - "expo.json"
        - "app.json"
      directories:
        - "android"
        - "ios"
        - "lib"
        - "src/screens"
        - "src/components"
      dependencies:
        - "flutter"
        - "react-native"
        - "expo"
        - "@react-native"
    tech_stacks:
      - "Flutter"
      - "React Native"
      - "Expo"
      - "Ionic"
      - "Xamarin"
      - "Native iOS"
      - "Native Android"
    default_config:
      complexity_score: 7
      estimated_duration: "4-10ä¸ªæœˆ"
      team_size: "2-6äºº"
      archive_threshold:
        lines: 180
        days: 6
        decisions: 4

  devops:
    name: "DevOps/åŸºç¡€è®¾æ–½é¡¹ç›®"
    detection_rules:
      files:
        - "Dockerfile"
        - "docker-compose.yml"
        - "kubernetes.yaml"
        - "terraform.tf"
        - "ansible.yml"
        - "Jenkinsfile"
        - ".github/workflows"
        - ".gitlab-ci.yml"
      directories:
        - "infrastructure"
        - "deployment"
        - "k8s"
        - "terraform"
        - "ansible"
        - "scripts"
    tech_stacks:
      - "Docker"
      - "Kubernetes"
      - "Terraform"
      - "Ansible"
      - "Jenkins"
      - "GitHub Actions"
      - "AWS"
      - "Azure"
      - "GCP"
    default_config:
      complexity_score: 8
      estimated_duration: "2-8ä¸ªæœˆ"
      team_size: "1-4äºº"
      archive_threshold:
        lines: 120
        days: 14
        decisions: 6

# ğŸ·ï¸ æ™ºèƒ½æ ‡ç­¾ç³»ç»Ÿé…ç½®
smart_tags:
  auto_generation: true
  categories:
    technical:
      - "frontend"
      - "backend" 
      - "fullstack"
      - "mobile"
      - "api"
      - "database"
    functional:
      - "crud"
      - "authentication"
      - "authorization"
      - "payment"
      - "notification"
      - "search"
    quality:
      - "tested"
      - "documented"
      - "optimized"
      - "secure"
      - "scalable"
    progress:
      - "planning"
      - "development"
      - "testing"
      - "deployment"
      - "maintenance"

tagging_system:
  auto_generation:
    enabled: true
    update_frequency: "on_change"
    confidence_threshold: 0.7

  tag_categories:
    technical:
      prefix: "#tech-"
      sources:
        - "dependencies"
        - "file_extensions"
        - "framework_detection"
      examples:
        - "#tech-react"
        - "#tech-typescript"
        - "#tech-docker"
        - "#tech-mysql"

    status:
      prefix: "#status-"
      sources:
        - "project_phase"
        - "completion_rate"
        - "activity_level"
      examples:
        - "#status-planning"
        - "#status-development"
        - "#status-testing"
        - "#status-production"

    priority:
      prefix: "#priority-"
      sources:
        - "task_urgency"
        - "business_impact"
        - "deadline_proximity"
      examples:
        - "#priority-critical"
        - "#priority-high"
        - "#priority-medium"
        - "#priority-low"

    team:
      prefix: "#team-"
      sources:
        - "team_size"
        - "experience_level"
        - "collaboration_pattern"
      examples:
        - "#team-small"
        - "#team-medium"
        - "#team-large"
        - "#team-distributed"

    domain:
      prefix: "#domain-"
      sources:
        - "business_context"
        - "industry_type"
        - "application_domain"
      examples:
        - "#domain-ecommerce"
        - "#domain-fintech"
        - "#domain-healthcare"
        - "#domain-education"

# ğŸ“Š è´¨é‡è¯„åˆ†é…ç½®
quality_scoring:
  enabled: true
  real_time_calculation: true
  
  scoring_dimensions:
    completeness:
      weight: 0.3
      criteria:
        - "required_fields_filled"
        - "description_detail_level"
        - "metadata_completeness"
      scoring_rules:
        excellent: 90-100  # æ‰€æœ‰å¿…å¡«å­—æ®µå®Œæ•´ï¼Œæè¿°è¯¦ç»†
        good: 70-89       # å¤§éƒ¨åˆ†å­—æ®µå®Œæ•´ï¼Œæè¿°é€‚ä¸­
        fair: 50-69       # åŸºæœ¬å­—æ®µå®Œæ•´ï¼Œæè¿°ç®€å•
        poor: 0-49        # ç¼ºå°‘å…³é”®å­—æ®µæˆ–æè¿°

    evidence_quality:
      weight: 0.25
      criteria:
        - "link_validity"
        - "evidence_relevance"
        - "proof_completeness"
      scoring_rules:
        excellent: 90-100  # æ‰€æœ‰é“¾æ¥æœ‰æ•ˆï¼Œè¯æ®å……åˆ†
        good: 70-89       # å¤§éƒ¨åˆ†é“¾æ¥æœ‰æ•ˆï¼Œè¯æ®è¾ƒå¥½
        fair: 50-69       # éƒ¨åˆ†é“¾æ¥æœ‰æ•ˆï¼Œè¯æ®ä¸€èˆ¬
        poor: 0-49        # é“¾æ¥å¤±æ•ˆæˆ–è¯æ®ä¸è¶³

    timeliness:
      weight: 0.2
      criteria:
        - "update_frequency"
        - "information_freshness"
        - "response_time"
      scoring_rules:
        excellent: 90-100  # åŠæ—¶æ›´æ–°ï¼Œä¿¡æ¯æ–°é²œ
        good: 70-89       # å®šæœŸæ›´æ–°ï¼Œä¿¡æ¯è¾ƒæ–°
        fair: 50-69       # å¶å°”æ›´æ–°ï¼Œä¿¡æ¯ä¸€èˆ¬
        poor: 0-49        # å¾ˆå°‘æ›´æ–°ï¼Œä¿¡æ¯é™ˆæ—§

    relevance:
      weight: 0.25
      criteria:
        - "task_correlation"
        - "decision_traceability"
        - "context_consistency"
      scoring_rules:
        excellent: 90-100  # é«˜åº¦ç›¸å…³ï¼Œé€»è¾‘æ¸…æ™°
        good: 70-89       # è¾ƒä¸ºç›¸å…³ï¼Œé€»è¾‘åˆç†
        fair: 50-69       # åŸºæœ¬ç›¸å…³ï¼Œé€»è¾‘ä¸€èˆ¬
        poor: 0-49        # ç›¸å…³æ€§ä½ï¼Œé€»è¾‘æ··ä¹±

  quality_thresholds:
    high_quality: 85      # é«˜è´¨é‡å†…å®¹é˜ˆå€¼
    medium_quality: 70    # ä¸­ç­‰è´¨é‡å†…å®¹é˜ˆå€¼
    low_quality: 50       # ä½è´¨é‡å†…å®¹é˜ˆå€¼
    archive_threshold: 30 # è‡ªåŠ¨å½’æ¡£é˜ˆå€¼

# ğŸ”„ æ™ºèƒ½å½’æ¡£ç­–ç•¥é…ç½®
archive_strategy:
  enabled: true
  strategy_type: "adaptive"  # adaptive, fixed, manual
  
  trigger_conditions:
    primary:
      - type: "line_count"
        threshold: 200
        weight: 0.3
      - type: "file_size"
        threshold: "2.90MB"
        weight: 0.2
      - type: "time_span"
        threshold: "7days"
        weight: 0.2
      - type: "decision_count"
        threshold: 5
        weight: 0.15
      - type: "milestone_reached"
        threshold: true
        weight: 0.15

    secondary:
      - type: "quality_degradation"
        threshold: 0.3  # ä½è´¨é‡å†…å®¹å æ¯”è¶…è¿‡30%
        weight: 0.4
      - type: "activity_decline"
        threshold: "3days"  # 3å¤©æ— æ´»åŠ¨
        weight: 0.3
      - type: "phase_change"
        threshold: true
        weight: 0.3

  content_classification:
    by_priority:
      P0_critical:
        retention: "permanent"
        archive_strategy: "preserve_all"
      P1_important:
        retention: "long_term"
        archive_strategy: "preserve_key_info"
      P2_normal:
        retention: "standard"
        archive_strategy: "summarize_and_archive"

    by_type:
      decisions:
        retention: "permanent"
        archive_strategy: "full_context_preserve"
      tasks:
        retention: "completion_based"
        archive_strategy: "outcome_focused"
      issues:
        retention: "resolution_based"
        archive_strategy: "solution_focused"
      notes:
        retention: "relevance_based"
        archive_strategy: "selective_preserve"

    by_quality:
      high_quality:
        retention: "extended"
        archive_strategy: "priority_preserve"
      medium_quality:
        retention: "standard"
        archive_strategy: "standard_archive"
      low_quality:
        retention: "minimal"
        archive_strategy: "compress_or_discard"

# ğŸ”— å…³è”å…³ç³»ç®¡ç†é…ç½®
relationship_management:
  enabled: true
  auto_detection: true
  
  relationship_types:
    dependency:
      description: "ä»»åŠ¡æˆ–å†³ç­–ä¹‹é—´çš„ä¾èµ–å…³ç³»"
      detection_keywords:
        - "depends on"
        - "requires"
        - "blocks"
        - "prerequisite"
      weight: 0.8

    influence:
      description: "å†³ç­–å¯¹åç»­ä»»åŠ¡çš„å½±å“å…³ç³»"
      detection_keywords:
        - "affects"
        - "impacts"
        - "influences"
        - "determines"
      weight: 0.7

    similarity:
      description: "ç›¸ä¼¼é—®é¢˜æˆ–è§£å†³æ–¹æ¡ˆçš„å…³è”"
      detection_keywords:
        - "similar to"
        - "like"
        - "related"
        - "comparable"
      weight: 0.6

    sequence:
      description: "æ—¶é—´åºåˆ—ä¸Šçš„å‰åå…³ç³»"
      detection_keywords:
        - "follows"
        - "precedes"
        - "next"
        - "previous"
      weight: 0.5

  visualization:
    enabled: true
    max_nodes: 50
    layout: "force_directed"
    show_weights: true
    color_coding:
      dependency: "#FF6B6B"
      influence: "#4ECDC4"
      similarity: "#45B7D1"
      sequence: "#96CEB4"

# ğŸ”” é€šçŸ¥å’Œæé†’é…ç½®
notifications:
  enabled: true
  
  reminder_types:
    milestone:
      enabled: true
      advance_notice: "3days"
      frequency: "daily"
    
    deadline:
      enabled: true
      advance_notice: "3days"
      frequency: "daily"
      escalation: "1day"
    
    quality_degradation:
      enabled: true
      threshold: 70
      frequency: "weekly"
    
    archive_suggestion:
      enabled: true
      threshold_reached: 0.8  # 80%è¾¾åˆ°å½’æ¡£æ¡ä»¶æ—¶æé†’
      frequency: "on_trigger"

  delivery_methods:
    - "in_app"
    - "comment"
    - "summary_report"

# ğŸ”Œ é›†æˆé…ç½®
integrations:
  git:
    enabled: true
    auto_record_commits: true
    commit_message_analysis: true
    branch_tracking: true
    
  ci_cd:
    enabled: true
    deployment_tracking: true
    build_status_monitoring: true
    
  issue_tracking:
    enabled: true
    sync_issue_status: true
    link_resolution: true
    
  documentation:
    enabled: true
    auto_link_docs: true
    version_tracking: true

# ğŸ¨ æ¨¡æ¿è‡ªå®šä¹‰é…ç½®
template_customization:
  allow_custom_sections: true
  section_ordering: "flexible"
  required_sections:
    - "é¡¹ç›®å…ƒæ•°æ®"
    - "ç½®é¡¶ä¿¡æ¯"
    - "å†³ç­–è®°å½•"
    - "å¾…åŠäº‹é¡¹"
    - "å·²å®Œæˆ"
  
  optional_sections:
    - "é¡¹ç›®ç¬”è®°"
    - "é—®é¢˜è¿½è¸ª"
    - "é¡¹ç›®ç»Ÿè®¡"
    - "å…³è”ä¿¡æ¯"
    - "é¡¹ç›®é…ç½®"
  
  custom_fields:
    enabled: true
    max_custom_fields: 10
    field_types:
      - "text"
      - "number"
      - "date"
      - "url"
      - "select"
      - "multi_select"

# ğŸ“ˆ åˆ†æå’ŒæŠ¥å‘Šé…ç½®
analytics:
  enabled: true
  
  metrics:
    productivity:
      - "tasks_completed_per_day"
      - "decision_making_speed"
      - "issue_resolution_time"
    
    quality:
      - "average_quality_score"
      - "quality_trend"
      - "evidence_completeness"
    
    collaboration:
      - "team_activity_distribution"
      - "communication_frequency"
      - "knowledge_sharing_rate"
  
  reporting:
    frequency: "weekly"
    auto_generate: true
    include_trends: true
    include_recommendations: true

# ğŸ”§ ç³»ç»Ÿé…ç½®
system:
  version_compatibility:
    min_version: "2.0"
    max_version: "2.x"
  
  performance:
    max_file_size: "3MB"  # project.context.md æœ€å¤§å¤§å°
    max_archive_size: "5MB"  # å•ä¸ªå½’æ¡£æ–‡ä»¶æœ€å¤§å¤§å°
    max_total_archive_size: "100MB"  # æ‰€æœ‰å½’æ¡£æ–‡ä»¶æ€»å¤§å°
    cache_duration: "24hours"
    
  backup:
    enabled: true
    frequency: "daily"
    retention: "30days"
    
  security:
    data_encryption: true
    access_logging: true
    sensitive_data_masking: true

# ğŸ“ ä½¿ç”¨è¯´æ˜
usage_notes: |
  1. æ­¤é…ç½®æ–‡ä»¶å®šä¹‰äº†è®°å½•å‘˜ç³»ç»Ÿv2.0çš„æ‰€æœ‰æ™ºèƒ½åŒ–åŠŸèƒ½å‚æ•°
  2. é¡¹ç›®ç±»å‹ä¼šæ ¹æ®detection_rulesè‡ªåŠ¨è¯†åˆ«ï¼Œä¹Ÿå¯æ‰‹åŠ¨æŒ‡å®š
  3. è´¨é‡è¯„åˆ†ä¼šå®æ—¶è®¡ç®—ï¼Œå½±å“å½’æ¡£ç­–ç•¥å’Œå†…å®¹åˆ†ç±»
  4. å…³è”å…³ç³»ä¼šè‡ªåŠ¨æ£€æµ‹ï¼Œæ”¯æŒå¯è§†åŒ–å±•ç¤º
  5. æ‰€æœ‰é…ç½®é¡¹éƒ½å¯ä»¥æ ¹æ®é¡¹ç›®éœ€æ±‚è¿›è¡Œè°ƒæ•´
  6. å»ºè®®åœ¨é¡¹ç›®åˆæœŸæ ¹æ®å®é™…æƒ…å†µè°ƒæ•´é˜ˆå€¼å’Œæƒé‡